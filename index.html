<!DOCTYPE html>
<html>
  <head>
    <title>Child Browser Example</title>
    <link rel="stylesheet" href="css/master.css" type="text/css" media="screen" title="no title" charset="utf-8">
  </head>  
  
  <body onload="init()">
		 <div id="mainWebsite">
			<div id="titlebar"><span id="title">Seneca CMS</span></div>
				
				
				<div id="menu">
					<ul>
						<a href="#" onmouseover="document.getElementById('button1').style.backgroundColor='red'" onmouseout="document.getElementById('button1').style.backgroundColor='#68a0ec'" onclick="loadStartpage()"><li id="button1">go to startpage</li></a>
						<a href="#" onmouseover="document.getElementById('button2').style.backgroundColor='red'" onmouseout="document.getElementById('button2').style.backgroundColor='#68a0ec'" onclick="loadIntern('http://ixpdev/Mgr/ManagerLogin')"><li id="button2">Load intern</li></a>
						<a href="#" onmouseover="document.getElementById('button3').style.backgroundColor='red'" onmouseout="document.getElementById('button3').style.backgroundColor='#68a0ec'" onclick="loadExtern()"><li id="button3">Load extern</li></a>
						<a href="#" onmouseover="document.getElementById('button4').style.backgroundColor='red'" onmouseout="document.getElementById('button4').style.backgroundColor='#68a0ec'" onclick="saveURL()"><li id="button4">Set startpage</li></a>
					</ul>  
				</div> 
			<div id="bottombar"><a href="#" onclick="loadIntern('http://www.seneca.nl/')">Seneca</a></div> 
		</div>
  </body>
    <script>

    // Wait for PhoneGap to load
    //
    
    function loadStartpageDelay(locbar, url)
    {
    	alert(url)
    	setTimeout(showPage(locbar, url), 500);
    }
    
    function init()
    {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // PhoneGap is ready
    //
    function onDeviceReady() 
    {
    	return true;
    }
    
    function locationChanged(newurl) {

        console.log("The JS got this url = " + newurl);
    }
    
    function closed() {
        console.log("The JS got a close event");
    }
    	
    function showPage(IOE) 
    {
    	alert("ioe..?" + IOE)
    	if(IOE == "intern")
    	{
    		alert((window.plugins.childBrowser != undefined) + " should be true")
    		url = localStorage['loadIntern'];
    		window.plugins.childBrowser.showWebPage(url,
            { showLocationBar: true });
        }
    	if(IOE == "extern")
        {
        	alert((window.plugins.childBrowser != undefined) + " should be true")
        	url = localStorage['loadextern'];
        	window.plugins.childBrowser.showWebPage(url,
            { showLocationBar: true });
        }
        if(IOE == "extern")
        {
        	alert((window.plugins.childBrowser != undefined) + " should be true")
        	url = localStorage['loadexternalbrowser'];
        	window.plugins.childBrowser.showWebPage(url,
            { showLocationBar: true });
        }
        if(IOE == "internStart")
      	{
      		alert((window.plugins.childBrowser != undefined) + " should be true")
      		alert("now is the time");
      		url = localStorage['startpage'];
      		alert(url);
    		 window.plugins.childBrowser.showWebPage(url,
            { showLocationBar: true });
         }
         else{
         	alert("jumped to the else")
            alert((window.plugins.childBrowser != undefined) + " should be true")
      		alert("now is the time");
      		url = localStorage['startpage'];
      		alert(url);
    		 window.plugins.childBrowser.showWebPage(url,
            { showLocationBar: true });
            }
        }
       //
    
    function openExternal() {
        window.plugins.childBrowser.openExternal("ixpdev/");
    } 
    
    function checkUrl()
    {
    	alert(localStorage['loadIntern']);
    }
	function loadIntern(url)
	{
		localStorage['loadIntern'] = url;
		var IOE = "intern";
		showPage(IOE);
	}
	function loadExtern()
	{
		localStorage['loadextern'] = 'http://demo.smartsite.nl/Mgr/ManagerLogin' 
		var IOE = "extern";
		showPage(IOE)
	}
	function loadExternalBrowser()
	{
		localStorage['loadexternalbrowser'] = 'http://demo.smartsite.nl/Mgr/ManagerLogin' 
		var IOE = "externalBrowser";
		showPage(IOE)
	}
	function loadStartpage()
	{
		if(localStorage['startpage'] == null || localStorage['startpage'] == "")
		{
			saveURL()
			loadStartpage()
		}
		else{
				var IOE = "internStart";
				showPage(IOE);
		}
	}
	
	function init()
	{
		alert(window.screen.height);
		if (window.screen.height == 990) 
		{
    		document.getElementById('mainWebsite').style.height='870px';
   	}
   		if (window.screen.height == 1280) 
		{
    		document.getElementById('mainWebsite').style.height='600px';
   		}
   }
   function saveURL()
   {
   	var url=prompt("Give url for the startpage","http://www.");
   	var subsurl = url.substr(0,4)
	if (url!=null && url!="")
  	{
  		alert(subsurl);
  		if(subsurl != "http")
  		{
  			url = "http://" + url;
  		}
  		localStorage['startpage'] = url;
  		alert(url);
  	}
  	else{
  		alert("enter something");
  	} 
   }
	
	
    </script>
  
</html>